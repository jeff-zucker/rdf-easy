<script src=
  "https://solid.github.io/solid-auth-client/dist/solid-auth-client.bundle.js"
></script>
<script src=
  "https://cdn.jsdelivr.net/npm/rdflib@0.20.1/dist/rdflib.min.js"
></script>
<script src=
  "../src/index.js"
></script>
<body>

  <p>This is a test of RDF-Easy</p>
  <p>Open your dev console to see output of this script.</p>

<script>
const rdf = new RdfEasy( SolidAuthClient, $rdf )

const profileUrl = "https://jeffz.solid.community/profile/card"
const storageUrl = "https://jeffz.solid.community/public/Music/"

async function main(){
  await rdf.load( profileUrl, storageUrl )
  let name    = await rdf.value( profileUrl, {thisDoc:"me"} ,{foaf:"name"} )
  let friends = await rdf.query( profileUrl, {thisDoc:"me"} ,{foaf:"knows"} )
  let files   = await rdf.query( storageUrl, {thisDoc:""}   ,{ldp:"contains"} )
  let size    = await rdf.value( storageUrl, files[0].object,{stat:"size"} )
  display(name,friends,files,size)
}

async function display(name,friends,files,size){
  for(var f in friends){ 
    let friendsName=await rdf.value(profileUrl,friends[f].object,{foaf:"name"})
    console.log(`${name} knows ${friendsName}`)
  }
  for(var f in files) {
    console.log(`storage includes <${files[f].object.value}>`)
  }
  console.log(`The first storage item is ${size} bytes long.`)
}
main()
</script>
