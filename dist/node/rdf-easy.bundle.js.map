{"version":3,"sources":["webpack://RDFeasy/webpack/bootstrap","webpack://RDFeasy/./src/rdflib-easy.js","webpack://RDFeasy/./src/index.js","webpack://RDFeasy/(webpack)/buildin/harmony-module.js","webpack://RDFeasy/external {\"commonjs\":\"rdflib\",\"commonjs2\":\"rdflib\",\"amd\":\"rdflib\",\"root\":\"$rdf\"}"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","$rdf","[object Object]","auth","this","_prefixStr","_getPrefixes","_auth","sources","query","source","store","graph","fetcher","fetch","load","dataUrl","sparqlStr","_prepSparql","Array","isArray","_multiQuery","_runQuery","sparql","outputFormat","_load","results","_execute","match","length","keys","self","Promise","async","resolve","reject","preparedQuery","SPARQLToQuery","wanted","vars","resultAry","row","_rowHandler","push","found","got","replace","w","label","url","turtle","rdfType","method","body","headers","Content-Type","err","aliases","acl","arg","cal","contact","dc","dct","doap","foaf","http","httph","icalTZ","ldp","link","linkr","log","media","meeting","mo","owl","pad","patch","qu","trip","rdf","rdfs","rss","sched","schema","sioc","solid","space","stat","tab","tabont","ui","vcard","wf","xsd","prefixStr","a","__webpack_exports__","_rdflib_easy_js__WEBPACK_IMPORTED_MODULE_0__","_rdflib_easy_js__WEBPACK_IMPORTED_MODULE_0___default","originalModule","webpackPolyfill","children","require"],"mappings":"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","file":"rdf-easy.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","if(typeof window===\"undefined\") $rdf = require('rdflib')\n\nclass RDFeasy {\n\n  constructor(auth){\n    this._prefixStr = this._getPrefixes()\n    this._auth = auth\n  }\n\n  async _multiQuery(sources,query){\n    this.store = $rdf.graph()\n    this.fetcher = $rdf.fetcher(this.store,{fetch:this._auth.fetch})\n    for(var source of sources){\n      await this.fetcher.load(source)\n    }\n    return await this.query(null,query)\n  }\n\n  async query(dataUrl,sparqlStr){\n    sparqlStr = this._prepSparql(dataUrl,sparqlStr)\n    if(Array.isArray(dataUrl)) { \n      return await this._multiQuery(dataUrl,sparqlStr) \n    }\n    return await this._runQuery( dataUrl, sparqlStr, \"array\" )\n  }\n  async value(source,sparql){\n    sparql = this._prepSparql(source,sparql)\n    return await this._runQuery( source, sparql, \"value\" )\n  }\n\n  async _runQuery(dataUrl,sparqlStr,outputFormat){\n    if(dataUrl) await this._load(dataUrl)\n    let results = await this._execute(sparqlStr)\n    if(outputFormat.match(/array/i)){ return results }\n    else if(outputFormat.match(/value/i)) {\n       if(!results || results.length < 1) return \"\"\n       let key = ( Object.keys(results[0])[0]  )\n       return( results[0][key] )\n    }\n  }\n\n  async _execute(sparql){ \n    let self = this\n    return new Promise(async(resolve, reject)=>{\n    let preparedQuery = $rdf.SPARQLToQuery(sparql,false,self.store)\n    let wanted = preparedQuery.vars\n    let resultAry = []\n    self.store.query(preparedQuery, async(results) =>  {\n      if(typeof(results)===\"undefined\") { reject(\"No results.\") }\n      let row = await this._rowHandler(wanted,results) \n      if(row) resultAry.push(row)\n    }, {} , function(){return resolve(resultAry)} )\n  })\n}\n\n  async _rowHandler(wanted,results){\n    let row = {}\n    for(var r in results){\n      let found = false\n      let got = r.replace(/^\\?/,'')\n      if(wanted.length){\n        for(var w in wanted){\n          if(got===wanted[w].label){ found=true; continue }\n        }\n        if(!found) continue\n      } \n      row[got]=results[r].value\n    }\n    return(row)\n  }\n\n  _prepSparql(source,sparql){\n    if(!sparql) sparql = \"SELECT * WHERE {?subject ?predicate ?object.}\"\n    sparql=sparql.replace(/\\<\\>/,\"<\"+source+\">\")\n    sparql = `PREFIX : <${source}#>\\n` + this._prefixStr + sparql\n    return sparql\n  }\n\n  async _load(url){\n    this.store = $rdf.graph()\n    this.fetcher = $rdf.fetcher(this.store,{fetch:this._auth.fetch})\n    await this.fetcher.load(url)\n  }\n\n  async createOrReplace(url,turtle,rdfType=\"text/turtle\"){\n    try {\n      await this._auth.fetch(url,{\n         method: \"PUT\",\n           body: turtle,\n        headers: {\"Content-Type\": rdfType}\n      })\n    } catch (err) {\n       throw err\n    }\n  }\n\n  async update(url,sparql){\n    try {\n      return await this._auth.fetch(url,{\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/sparql-update' },\n        body: sparql\n      })\n    } catch (err) {\n       throw err\n    }\n  }\n\n /**\n  *  lifted from solid-namespace package\n  */\n _getPrefixes(){\n  let aliases = {\n  acl: 'http://www.w3.org/ns/auth/acl#',\n  arg: 'http://www.w3.org/ns/pim/arg#',\n  cal: 'http://www.w3.org/2002/12/cal/ical#',\n  contact: 'http://www.w3.org/2000/10/swap/pim/contact#',\n  dc: 'http://purl.org/dc/elements/1.1/',\n  dct: 'http://purl.org/dc/terms/',\n  doap: 'http://usefulinc.com/ns/doap#',\n  foaf: 'http://xmlns.com/foaf/0.1/',\n  http: 'http://www.w3.org/2007/ont/http#',\n  httph: 'http://www.w3.org/2007/ont/httph#',\n  icalTZ: 'http://www.w3.org/2002/12/cal/icaltzd#', // Beware: not cal:\n  ldp: 'http://www.w3.org/ns/ldp#',\n  link: 'http://www.w3.org/2007/ont/link#',\n  linkr: 'http://www.iana.org/assignments/link-relations/',\n  log: 'http://www.w3.org/2000/10/swap/log#',\n  media: 'http://www.iana.org/assignments/media-types/',\n  meeting: 'http://www.w3.org/ns/pim/meeting#',\n  mo: 'http://purl.org/ontology/mo/',\n  owl: 'http://www.w3.org/2002/07/owl#',\n  pad: 'http://www.w3.org/ns/pim/pad#',\n  patch: 'http://www.w3.org/ns/pim/patch#',\n  qu: 'http://www.w3.org/2000/10/swap/pim/qif#',\n  trip: 'http://www.w3.org/ns/pim/trip#',\n  rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n  rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n  rss: 'http://purl.org/rss/1.0/',\n  sched: 'http://www.w3.org/ns/pim/schedule#',\n  schema: 'http://schema.org/', // @@ beware confusion with documents no 303\n  sioc: 'http://rdfs.org/sioc/ns#',\n  solid: 'http://www.w3.org/ns/solid/terms#',\n  space: 'http://www.w3.org/ns/pim/space#',\n  stat: 'http://www.w3.org/ns/posix/stat#',\n  tab: 'http://www.w3.org/2007/ont/link#',\n  tabont: 'http://www.w3.org/2007/ont/link#',\n  ui: 'http://www.w3.org/ns/ui#',\n  vcard: 'http://www.w3.org/2006/vcard/ns#',\n  wf: 'http://www.w3.org/2005/01/wf/flow#',\n  xsd: 'http://www.w3.org/2001/XMLSchema#',\n}\n  let prefixStr=\"\"\n  for(var a in aliases){\n    prefixStr = prefixStr+`PREFIX ${a}: <${aliases[a]}>\\n`\n  }\n  return prefixStr\n}\n\n}\n\nmodule.exports = exports = RDFeasy\n","import RDFeasy from './rdflib-easy.js'\n\nif(typeof window==='undefined')  module.exports = RDFeasy\n\nexport default RDFeasy\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = require(\"rdflib\");"],"sourceRoot":""}